# PC-0002: Admin Queries + assignTier Mutation

## Summary

New `convex/admin.ts` with `checkIsSuperAdmin` query, `listOrganizationsWithSubscriptions` query, and `assignTier` mutation. All guarded by `assertSuperAdmin`.

## Changes

### New: `convex/admin.ts`

**`checkIsSuperAdmin`** query

- Args: `{ authKitId: v.string() }`
- Looks up user by authKitId, returns `isSuperAdmin(user.email)`
- No throw on false — just returns boolean (used for redirect logic)

**`listOrganizationsWithSubscriptions`** query

- Args: `{ authKitId: v.string() }`
- Guard: `assertSuperAdmin(ctx, authKitId)`
- Collect all orgs, for each lookup subscription via `by_organization` index
- Return array of `{ _id, name, slug, tier, status }` where tier defaults to `'free'` and status to `'active'` if no sub

**`assignTier`** mutation

- Args: `{ authKitId: v.string(), organizationId: v.id('organizations'), tier: v.union(v.literal('free'), v.literal('pro'), v.literal('enterprise')) }`
- Guard: `assertSuperAdmin(ctx, authKitId)`
- Lookup existing sub via `by_organization` index
- If tier is `'free'` and sub exists → `ctx.db.delete(sub._id)`
- If tier is `'free'` and no sub → no-op
- If sub exists → `ctx.db.patch` with `tier`, `paymentProvider: 'physical_contract'`, `status: 'active'`, `updatedAt`
- If no sub → `ctx.db.insert` with all required fields: `physical_contract`, `active`, `monthly`, far-future `currentPeriodEnd`, zero usage counters, `currency: 'COP'`, `amountPerPeriod: 0`

## Files

- `convex/admin.ts` (new)
