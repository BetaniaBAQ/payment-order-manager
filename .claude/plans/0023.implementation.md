# 0023: Payment reminder + failed email templates

## Summary

Add PAYMENT_REMINDER and PAYMENT_FAILED email templates for billing notifications. Requires separate `sendBillingEmail` action since existing `send` is order-centric.

## Questions (for user)

None — spec is clear.

## Changes

### 1. `convex/schema/notifications.ts`

- Add `PAYMENT_REMINDER` and `PAYMENT_FAILED` to NotificationType const + validator

### 2. `convex/emails/paymentReminder.tsx` (new)

- Spanish template: plan name, expiry date, "Renovar ahora" CTA
- Uses `EmailLayout` + `EmailButton` from base.tsx

### 3. `convex/emails/paymentFailed.tsx` (new)

- Spanish template: plan name, error context, "Actualizar pago" CTA, support info
- Uses `EmailLayout` + `EmailButton` from base.tsx

### 4. `convex/emails.ts`

- Import both new templates
- Add `sendBillingEmail` internalAction with args: `type` (billing subset), `subscriptionId`, optional `errorMessage`
- Fetches subscription + org data, renders appropriate template, sends via resend
- Existing `send` and `emailHandlers` map unchanged (billing types not added there — different context shape)

## Files

- `convex/schema/notifications.ts` (modify)
- `convex/emails/paymentReminder.tsx` (new)
- `convex/emails/paymentFailed.tsx` (new)
- `convex/emails.ts` (modify)
