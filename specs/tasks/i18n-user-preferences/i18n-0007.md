# 0007: Locale-aware formatting utilities

## Context

Multiple components use hardcoded `Intl.NumberFormat('en-US', ...)` and `Intl.DateTimeFormat('en-US', ...)`. Create shared formatting functions that respect the active language. Also provide date-fns locale mapping for `react-day-picker`.

## Dependencies

- 0003 (preferences store for `useLanguage`)

## Files

- `src/lib/format.ts` (new)

## Requirements

### Locale mapping

```ts
const LOCALE_MAP: Record<Language, string> = {
  es: 'es-CO',
  en: 'en-US',
}
```

### Hook

```ts
export function useLocale(): string
```

Returns Intl locale string based on `useLanguage()`.

### Pure functions

```ts
export function formatCurrency(
  amount: number,
  currency: string,
  locale: string,
): string
export function formatDate(
  timestamp: number,
  locale: string,
  options?: Intl.DateTimeFormatOptions,
): string
export function formatDateTime(timestamp: number, locale: string): string
export function formatFileSize(bytes: number, locale: string): string
```

- `formatCurrency` — `Intl.NumberFormat` with `style: 'currency'`, `minimumFractionDigits: 0`
- `formatDate` — defaults to `{ month: 'short', day: 'numeric', year: 'numeric' }`
- `formatDateTime` — adds `hour: 'numeric', minute: '2-digit'`
- `formatFileSize` — human-readable bytes (KB/MB) with locale number formatting

### date-fns locale export

```ts
import { enUS } from 'date-fns/locale/en-US'
import { es } from 'date-fns/locale/es'

export const DATE_FNS_LOCALES: Record<Language, Locale> = { es, en: enUS }
```

For `react-day-picker` `locale` prop in date filter components.

## Definition of Done

- [ ] `src/lib/format.ts` exports `useLocale`, `formatCurrency`, `formatDate`, `formatDateTime`, `formatFileSize`
- [ ] `DATE_FNS_LOCALES` exported for calendar components
- [ ] Pure functions accept `locale` param (no hook dependency inside)
- [ ] No TypeScript errors
